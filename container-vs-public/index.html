<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assigning a public IP to a container &mdash; ExPECA Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/style.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running a Python Notebook" href="../python-notebook/index.html" />
    <link rel="prev" title="Running a container towards Telenor Edge" href="../container-vs-telenor/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../contents.html" class="icon icon-home">
            ExPECA Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to ExPECA</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testbed workshop</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop Media</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testbed operation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../reservation-worker/index.html">Reservation of a worker node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reservation-sdr/index.html">Reservation of an SDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reservation-advantech/index.html">Reservation of an Advantech router</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reservation-ep5g/index.html">Reservation of EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container-basic/index.html">Running a basic container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network-ep5g/index.html">Network definition for EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container-vs-ep5g/index.html">Running a container towards EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container-vs-telenor/index.html">Running a container towards Telenor Edge</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Assigning a public IP to a container</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step-1-reserve-a-worker-node">Step 1: Reserve a worker node</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-create-a-container">Step 2: Create a container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python-notebook/index.html">Running a Python Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../images/index.html">ExPECA Docker Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../launch-oai-core-gnb/index.html">Launching OAI Core and GnodeB with SDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/index.html">Data Visualization</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">ExPECA Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../contents.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Assigning a public IP to a container</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/container-vs-public/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="assigning-a-public-ip-to-a-container">
<span id="container-vs-public"></span><h1>Assigning a public IP to a container<a class="headerlink" href="#assigning-a-public-ip-to-a-container" title="Permalink to this heading"></a></h1>
<p>This guide will walk you through the steps of assigning a public IP to a container.
This will allow worker node containers to have an IP address that can be used for access from the internet.</p>
<figure class="screenshot align-default">
<img alt="Public IP networking" src="../_images/public_ip.png" />
</figure>
<section id="step-1-reserve-a-worker-node">
<h2>Step 1: Reserve a worker node<a class="headerlink" href="#step-1-reserve-a-worker-node" title="Permalink to this heading"></a></h2>
<p>See the “reservation of a worker node” section.</p>
</section>
<section id="step-2-create-a-container">
<h2>Step 2: Create a container<a class="headerlink" href="#step-2-create-a-container" title="Permalink to this heading"></a></h2>
<p>Here, we connect a container application, running on a worker node, to a public IP. This involves including the container in the “serverpublic” network
when starting the container.</p>
<ul class="simple">
<li><p>From the ExPECA home page, click <em>Container</em> -&gt; <em>Containers</em></p></li>
</ul>
<figure class="screenshot align-default">
<img alt="Containers main page" src="../_images/container_run1.png" />
</figure>
<ul class="simple">
<li><p>Click <em>+ Create Container</em></p></li>
<li><p>See “Running a basic container” for the steps involved. We will here only focus on the data entered for network connection.</p></li>
<li><p>Under “Networks” tab, bring “serverpublic” to the top</p></li>
<li><p>Under “Miscellaneous” tab, enter environment variables needed for the container.</p></li>
<li><p>Under “Labels” tab, enter a public IP address in the 130.237.11.[113-126]/27 range, as well as the “serverpublic” gateway.</p></li>
</ul>
<figure class="screenshot align-default">
<img alt="Containers networks page" src="../_images/container_run2.png" />
</figure>
<figure class="screenshot align-default">
<img alt="Containers miscellaneous page" src="../_images/container_run3.png" />
</figure>
<figure class="screenshot align-default">
<img alt="Containers labels page" src="../_images/container_run4.png" />
</figure>
<ul class="simple">
<li><p>Click <em>Create</em></p></li>
</ul>
<figure class="screenshot align-default">
<img alt="Containers main page" src="../_images/container_run5.png" />
</figure>
<p>Note that DNS and default gateway needs to be set for the container. In this case, the container gets this information from
environment variables in the “miscellaneous” section, but it is up to the container designer for how this should be done.
It can be done either manually through the console, or if they want it done automatically, they can use a container that does such tasks during boot up.
To perform those tasks, the container must have ip commands installed. For an ubuntu container, this means the following line must be included in the Dockerfile:</p>
<p><em>RUN apt update &amp;&amp; apt install -y openssh-server iproute2</em></p>
<p>Then the following commands could be run either manually through the console, or within the container’s entrypoint:</p>
<div class="line-block">
<div class="line"><em># First fix the nameserver on the container</em></div>
<div class="line"><em>echo nameserver $DNS_IP &gt; /etc/resolv.conf</em></div>
<div class="line"><em># Fix the gateway</em></div>
<div class="line"><em>ip route del default</em></div>
<div class="line"><em>ip route add default via $GATEWAY_IP</em></div>
</div>
<p>You should now be able to connect with SSH to your container from the internet.</p>
<figure class="screenshot align-default">
<img alt="Container console page" src="../_images/container_run6.png" />
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../container-vs-telenor/index.html" class="btn btn-neutral float-left" title="Running a container towards Telenor Edge" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../python-notebook/index.html" class="btn btn-neutral float-right" title="Running a Python Notebook" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ExPECA.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>