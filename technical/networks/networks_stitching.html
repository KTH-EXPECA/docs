<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>External Layer2 Connections (Stitching) &mdash; ExPECA Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/style.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../contents.html" class="icon icon-home">
            ExPECA Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to ExPECA</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testbed workshop</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../workshop/index.html">Workshop Media</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testbed operation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-worker/index.html">Reservation of a worker node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-sdr/index.html">Reservation of an SDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-advantech/index.html">Reservation of an Advantech router</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-ep5g/index.html">Reservation of EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-basic/index.html">Running a basic container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../network-ep5g/index.html">Network definition for EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-vs-ep5g/index.html">Running a container towards EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-vs-telenor/index.html">Running a container towards Telenor Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-vs-public/index.html">Assigning a public IP to a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-notebook/index.html">Running a Python Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../images/index.html">ExPECA Docker Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../launch-oai-core-gnb/index.html">Launching OAI Core and GnodeB with SDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../visualization/index.html">Data Visualization</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">ExPECA Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../contents.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">External Layer2 Connections (Stitching)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/technical/networks/networks_stitching.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <hr class="docutils" id="stitching" />
<section id="external-layer2-connections-stitching">
<h1>External Layer2 Connections (Stitching)<a class="headerlink" href="#external-layer2-connections-stitching" title="Permalink to this heading"></a></h1>
<p>Chameleon provides support for sophisticated networking experiments by providing <a class="reference external" href="http://groups.geni.net/geni/wiki/GeniNetworkStitchingSites">GENI-style stitching</a>. This capability enables users to deploy networking experiments (layer 2 and layer 3) that span Chameleon and other facilities such as <a class="reference external" href="https://fabric-testbed.net/">FABRIC</a>.  Users can create dedicated Chameleon networks directly connected to external facilities and configure custom subnets and routers for handling these external connections. This capability is essential to users interested in experimenting with wide-area networks in a controlled environment or lower-level wide-area protocols (e.g.  BGP or other routing protocols) that are not typically configurable by experimenters.</p>
<p>Stitched Chameleon networks are connected to external facilities using one VLAN allocated from of a pool VLANs that are statically provisioned between Chameleon and the external facility. Users can allocate one of these VLANs by making a reservation using Blazar. Currently, externally stitched networks are created by Blazar when the reservation is started.   There is a pool of VLANs (3300-3309) between the Chameleon CHI&#64;UC racks to the FABRIC site at StarLight (Chicago). Connections between the TACC site and FABRIC are in development.</p>
<p>The remainder of this document describes how to stitch Chameleon experiments to external resources using FABRIC. In addition to creating the stitched networks, you will need to know how to configure subnets and routers on dynamic VLANs as described in the <a class="reference internal" href="networks_vlan.html#network-isolation"><span class="std std-ref">Isolated Network VLANs</span></a> documentation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Stitching to FABRIC with the Python API is shown this a <a class="reference external" href="https://www.chameleoncloud.org/experiment/share/9284120f-3436-41f3-9e82-238e0628ec6c">Trovi Artifact</a></p>
</div>
</section>
<section id="configuring-a-stitchable-network">
<span id="network-stitchable-create"></span><h1>Configuring a Stitchable Network<a class="headerlink" href="#configuring-a-stitchable-network" title="Permalink to this heading"></a></h1>
<p>Your first step will require creating a stitchable network. Unlike creating
other networks on Chameleon, stitchable networks can only be created by first
reserving a stitchable VLAN segment. Once you reserve a VLAN segment, your network
will be created automatically. To reserve a segment on the appropriate
external testbed make sure to include <code class="docutils literal notranslate"><span class="pre">fabric</span></code> as the <code class="docutils literal notranslate"><span class="pre">stitch_provider</span></code>
in the <code class="docutils literal notranslate"><span class="pre">resource_properties</span></code> attribute. An example is provided below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>reservation<span class="w"> </span>lease<span class="w"> </span>create<span class="w"> </span>--reservation<span class="w"> </span><span class="se">\</span>
<span class="nv">resource_type</span><span class="o">=</span>network,network_name<span class="o">=</span>my-stitchable-network,<span class="se">\</span>
<span class="nv">resource_properties</span><span class="o">=</span><span class="s1">&#39;[&quot;==&quot;,&quot;$stitch_provider&quot;,&quot;fabric&quot;]&#39;</span><span class="w"> </span><span class="se">\</span>
--start-date<span class="w"> </span><span class="s2">&quot;2022-01-01 12:00&quot;</span><span class="w"> </span>--end-date<span class="w"> </span><span class="s2">&quot;2022-01-02 12:00&quot;</span><span class="w"> </span><span class="se">\</span>
my-stitchable-network-lease
</pre></div>
</div>
<p>After your stitched VLAN network is created, you will be able to query for the network to get the specific VLAN
that is used by your network.  Openstack refers to the VLAN as the <code class="docutils literal notranslate"><span class="pre">segmentation_id</span></code>.  The following command
will display the VLAN.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>network<span class="w"> </span>show<span class="w"> </span>my-stitchable-network<span class="w"> </span>--format<span class="w"> </span>value<span class="w"> </span>-c<span class="w"> </span>provider:segmentation_id
</pre></div>
</div>
<p>At this point your Chameleon network is connected to a FABRIC <code class="docutils literal notranslate"><span class="pre">facility</span> <span class="pre">port</span></code> at layer 2.  You can now create a
FABRIC slice and specify the Chameleon <code class="docutils literal notranslate"><span class="pre">segmentation_id</span></code> to use.  This is a layer 2 connection and you can configure
higher-level protocols, such as IP, in any way you desire.</p>
</section>
<section id="connecting-stitchable-isolated-networks-across-chameleon-sites">
<h1>Connecting Stitchable Isolated Networks across Chameleon Sites<a class="headerlink" href="#connecting-stitchable-isolated-networks-across-chameleon-sites" title="Permalink to this heading"></a></h1>
<p>Coming soon! When FABRIC stitching is available at TACC, you will be able to directly connect your
experiments that span UC and TACC Chameleon sites.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ExPECA.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>