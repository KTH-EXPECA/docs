<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Isolated Network VLANs &mdash; ExPECA Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/style.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../contents.html" class="icon icon-home">
            ExPECA Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to ExPECA</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testbed workshop</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../workshop/index.html">Workshop Media</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testbed operation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-worker/index.html">Reservation of a worker node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-sdr/index.html">Reservation of an SDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-advantech/index.html">Reservation of an Advantech router</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reservation-ep5g/index.html">Reservation of EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-basic/index.html">Running a basic container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../network-ep5g/index.html">Network definition for EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-vs-ep5g/index.html">Running a container towards EP5G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-vs-telenor/index.html">Running a container towards Telenor Edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container-vs-public/index.html">Assigning a public IP to a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-notebook/index.html">Running a Python Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../images/index.html">ExPECA Docker Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../launch-oai-core-gnb/index.html">Launching OAI Core and GnodeB with SDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../visualization/index.html">Data Visualization</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">ExPECA Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../contents.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Isolated Network VLANs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/technical/networks/networks_vlan.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="isolated-network-vlans">
<span id="network-isolation"></span><h1>Isolated Network VLANs<a class="headerlink" href="#isolated-network-vlans" title="Permalink to this heading"></a></h1>
<p>By default, bare metal nodes on each Chameleon site share the same local network (shared VLAN and IP subnet). However, some experiments may require more network isolation, which is now supported by Chameleon.</p>
<p>Chameleon’s implementation of network isolation is based on dynamically managed VLANs (network layer 2) associated with user-configured private IP subnets (network layer 3). This means that all network communications local to the IP subnet or the broadcast domain (such as Ethernet broadcast, ARP, IP broadcast, DHCP, etc.) will be restricted to the user-configured network and its associated VLAN. This feature enables a range of experiments in networking and security. For example, this allows running your own DHCP server to configure virtual machines running on bare metal nodes, without impacting other users.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Strong network isolation is provided at network layer 2 only. Even using separate IP subnetworks, any bare metal node can still communicate with each other and with the Internet through the network’s router. We are investigating solutions to provide stronger isolation at network layer 3.</p></li>
<li><p>Network isolation works on all nodes, including our low-power HP Moonshot nodes (low-power Xeon, Atom, ARM64).</p></li>
</ul>
</div>
<p>To use this feature, you will need to create a dedicated network and router. You can use a <a class="reference internal" href="../complex.html#complex"><span class="std std-ref">Heat template</span></a>, use the <em>Network</em> panel of the GUI, or use the CLI.</p>
<section id="configuring-networking-using-a-heat-template">
<h2>Configuring Networking using a Heat template<a class="headerlink" href="#configuring-networking-using-a-heat-template" title="Permalink to this heading"></a></h2>
<ol class="arabic">
<li><p>Go to <em>Project</em> &gt; <em>Orchestration</em> &gt; <em>Stacks</em>.</p></li>
<li><p>Click the <em>Launch Stack</em> button to open an interactive dialog.</p></li>
<li><p>Select <em>URL</em> as <em>Template Source</em> and paste <a class="reference external" href="https://raw.githubusercontent.com/ChameleonCloud/heat-templates/master/network-isolation/network-isolation.yaml">https://raw.githubusercontent.com/ChameleonCloud/heat-templates/master/network-isolation/network-isolation.yaml</a> to <em>Template URL</em>.</p></li>
<li><p>Click the <em>Next</em> button to navigate to the <em>Launch Stack</em> dialog.</p></li>
<li><p>Provide a name for your stack, enter your password, and set a private IP range, such as 192.168.1.0/24.</p></li>
<li><p>Set the first and the last IP addresses of <em>DHCP</em> range.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The first IP adddress in the DHCP range should never be *.1 and *.2. The last IP address in the range must be less than *.255.</p>
</div>
</li>
<li><p>Start creating the network and router by clicking the <em>Launch</em> button.</p></li>
</ol>
</section>
<section id="creating-a-network-using-the-gui">
<h2>Creating a Network using the GUI<a class="headerlink" href="#creating-a-network-using-the-gui" title="Permalink to this heading"></a></h2>
<p>To create a Network from either the <em>Network Topology</em> page or the <em>Networks</em> page, click the <em>+Create Network</em> button to open the <em>Create Network</em> dialog.</p>
<figure class="align-default" id="id4">
<img alt="The Create Network dialog" src="../../_images/createnetwork.png" />
<figcaption>
<p><span class="caption-text">The Create Network dialog</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>In <em>Create Network</em> dialog, name your network. In general, you will also want to create a <em>Subnet</em> for your new Network, so make sure you have <em>Create Subnet</em> checked. Click the <em>Next</em> button.</p>
<figure class="align-default" id="id5">
<img alt="The Subnet tab" src="../../_images/createnetworksubnet.png" />
<figcaption>
<p><span class="caption-text">The Subnet tab</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>When creating a <em>Subnet</em>, you must specify a  <em>Subnet Name</em> and a <a class="reference external" href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">CIDR</a> <em>Network Address</em> that contains a private IP address and a subnet mask length. For example, you may create a <a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc940018(v=technet.10)">Class C</a> subnet with a 24-bit mask by entering <code class="docutils literal notranslate"><span class="pre">192.168.1.0/24</span></code>. You may set a Gateway or leave it blank to use the default. Then, click the <em>Next</em> button.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p><strong>Do not</strong> select the <em>Disable Gateway</em> checkbox!</p>
</div>
<figure class="align-default" id="id6">
<img alt="Subnet details" src="../../_images/createnetworkdetails.png" />
<figcaption>
<p><span class="caption-text">Subnet details</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>You may specify <em>DHCP</em> and static <em>Route</em> information at <em>Subnet Details</em> section:</p>
<ul>
<li><p><em>Allocation Pools</em> section allows you to specify <em>DHCP</em> address ranges in the format of <code class="docutils literal notranslate"><span class="pre">&lt;first</span> <span class="pre">address&gt;,&lt;last</span> <span class="pre">address&gt;</span></code>. For example, entering <code class="docutils literal notranslate"><span class="pre">192.168.1.2,192.168.1.100</span></code> will create a <em>Subnet</em> with IP ranges from <code class="docutils literal notranslate"><span class="pre">192.168.1.2</span></code> to <code class="docutils literal notranslate"><span class="pre">192.168.1.100</span></code>.</p></li>
<li><p><em>DNS Name Servers</em> section allows you to specify a list of DNS servers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At <a class="reference external" href="https://chi.tacc.chameleoncloud.org">CHI&#64;TACC</a>, use <code class="docutils literal notranslate"><span class="pre">129.114.97.1</span></code> and <code class="docutils literal notranslate"><span class="pre">129.114.97.2</span></code> for your DNS servers
At <a class="reference external" href="https://chi.uc.chameleoncloud.org">CHI&#64;UC</a>, use <code class="docutils literal notranslate"><span class="pre">8.8.8.8</span></code> and <code class="docutils literal notranslate"><span class="pre">8.8.4.4</span></code> for your DNS servers</p>
</div>
</li>
<li><p><em>Host Routes</em> section allows you to specify static routing information for the subnet in the format of <code class="docutils literal notranslate"><span class="pre">&lt;subnet</span> <span class="pre">CIDR&gt;,&lt;router</span> <span class="pre">IP</span> <span class="pre">address&gt;</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">192.168.3.0/24,10.56.1.254</span></code> means all traffic from this Subnet to <code class="docutils literal notranslate"><span class="pre">192.168.3.0</span></code> will be forwarded to the Router Interface at <code class="docutils literal notranslate"><span class="pre">10.56.1.254</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All three sections above are line separated.</p>
</div>
<p>Click <em>Create</em> button and a new Network will be created. Check if the network is created without error.</p>
<section id="creating-a-router">
<h3>Creating a Router<a class="headerlink" href="#creating-a-router" title="Permalink to this heading"></a></h3>
<p>To create a <em>Router</em> from either the <em>Network Topology</em> page or the <em>Routers</em> page, click the <em>+Create Router</em> button to open the <em>Create Router</em> dialog.</p>
<figure class="align-default" id="id7">
<img alt="The Create Router dialog" src="../../_images/createrouter.png" />
<figcaption>
<p><span class="caption-text">The Create Router dialog</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>In this dialog, specify a <em>Router Name</em>. Optionally, you may select <em>public</em> as the <em>External Network</em> if you want to have external access.  Click <em>Create Router</em> to complete the process.</p>
</section>
<section id="adding-a-router-interface">
<h3>Adding a Router Interface<a class="headerlink" href="#adding-a-router-interface" title="Permalink to this heading"></a></h3>
<p>A Router may have multiple <em>Interfaces</em>, each connected to a <em>Network</em>. You may add an <em>Interface</em> to an existing <em>Router</em> by clicking on <em>Add Interface</em> from either the <em>Network Topology</em> page or the <em>Routers</em> page to open the <em>Add Interface</em> dialog.</p>
<figure class="align-default" id="id8">
<img alt="The Router interface in the Network Topology page" src="../../_images/topologyaddinterface.png" />
<figcaption>
<p><span class="caption-text">The Router interface in the Network Topology page</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id9">
<img alt="The Interfaces tab in the Router detail page" src="../../_images/networkaddinterface.png" />
<figcaption>
<p><span class="caption-text">The Interfaces tab in the Router detail page</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id10">
<img alt="The Add Interface dialog" src="../../_images/addinterface.png" />
<figcaption>
<p><span class="caption-text">The Add Interface dialog</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>First, select a network and subnet you have created. You can specify an <em>IP address</em>; otherwise, Chameleon will attempt to assign an IP address automatically. The gateway IP you assigned to the subnet will be automatically picked.</p>
</section>
<section id="deleting-networking-objects">
<h3>Deleting Networking Objects<a class="headerlink" href="#deleting-networking-objects" title="Permalink to this heading"></a></h3>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Network objects such as <em>Routers</em> and <em>Networks</em> must be deleted in the reverse order of which they were created. Objects <strong>can not</strong> be deleted while other objects are depending on them.</p>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p><strong>Before starting to delete network objects, make sure all instances using them are terminated!</strong></p>
</div>
<ol class="arabic">
<li><p>Go to <em>Project</em> &gt; <em>Network</em> &gt; <em>Routers</em>, and click on the router you would like to delete.</p></li>
<li><p>Go to <em>Static Routes</em> tab, and click on the <em>Delete Static Routes</em> button in the <em>Action</em> column. The <em>Static Routes</em> will be deleted after confirm.</p></li>
<li><p>Go to <em>Instances</em> tab, delete the Gateway interface by clicking on <em>Delete Interface</em> button in the <em>Action</em> column and confirm the deletion.</p></li>
<li><p>Now you can safely delete the router by clicking on the dropdown on the upper right corner. Then, click on <em>Delete Router</em>. Finally, confirm your deletion of the router.</p>
<figure class="align-default" id="id11">
<img alt="Dropdown for deleting router" src="../../_images/deleterouterbutton.png" />
<figcaption>
<p><span class="caption-text">Dropdown for deleting router</span><a class="headerlink" href="#id11" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p>Go to <em>Project</em> &gt; <em>Network</em> &gt; <em>Networks</em>, and delete the network by using the dropdown in the <em>Action</em> column. Alternatively, you may delete the network by selecting the network using the checkbox and click on <em>Delete Networks</em> button on the upper right corner. Confirm your deletion to finish the process.</p></li>
</ol>
</section>
</section>
<section id="configuring-networking-using-the-cli">
<h2>Configuring Networking using the CLI<a class="headerlink" href="#configuring-networking-using-the-cli" title="Permalink to this heading"></a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Reading <a class="reference internal" href="../cli.html#cli"><span class="std std-ref">Command Line Interface (CLI)</span></a> is highly recommended before continuing on the following sections.</p>
</div>
<p>Before using the CLI, make sure you have configured environment variables using <a class="reference internal" href="../cli.html#cli-rc-script"><span class="std std-ref">The OpenStack RC Script</span></a>.</p>
<section id="creating-a-network">
<span id="network-cli-create"></span><h3>Creating a Network<a class="headerlink" href="#creating-a-network" title="Permalink to this heading"></a></h3>
<p>You can create an <em>Isolated</em> VLAN Network using the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>--provider-network-type<span class="w"> </span>vlan<span class="w"> </span>--provider-physical-network<span class="w"> </span>physnet1<span class="w"> </span>&lt;network_name&gt;
</pre></div>
</div>
<p>The output should look like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>                     <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">admin_state_up</span>            <span class="o">|</span> <span class="n">UP</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zone_hints</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zones</span>        <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>                <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">23</span><span class="n">T23</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">19</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>               <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">dns_domain</span>                <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                        <span class="o">|</span> <span class="mi">21</span><span class="n">ed933c</span><span class="o">-</span><span class="mi">323</span><span class="n">d</span><span class="o">-</span><span class="mi">4708</span><span class="o">-</span><span class="mi">930</span><span class="n">c</span><span class="o">-</span><span class="n">d5f82c507430</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv4_address_scope</span>        <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_address_scope</span>        <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">is_default</span>                <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">is_vlan_transparent</span>       <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">mtu</span>                       <span class="o">|</span> <span class="mi">1500</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>                      <span class="o">|</span> <span class="n">MyNetwork</span>                            <span class="o">|</span>
<span class="o">|</span> <span class="n">port_security_enabled</span>     <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">project_id</span>                <span class="o">|</span> <span class="n">d5233415ee0b467baec14cbd2d0e1331</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">network_type</span>     <span class="o">|</span> <span class="n">vlan</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">physical_network</span> <span class="o">|</span> <span class="n">physnet1</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">segmentation_id</span>  <span class="o">|</span> <span class="mi">2018</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">qos_policy_id</span>             <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">revision_number</span>           <span class="o">|</span> <span class="mi">2</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">router</span><span class="p">:</span><span class="n">external</span>           <span class="o">|</span> <span class="n">Internal</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">segments</span>                  <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">shared</span>                    <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">status</span>                    <span class="o">|</span> <span class="n">ACTIVE</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">subnets</span>                   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">tags</span>                      <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>                <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">23</span><span class="n">T23</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">19</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note the <code class="docutils literal notranslate"><span class="pre">provider:segmentation_id</span></code> field in the above output. Each <em>Isolated</em>
VLAN Network requires a unique network segment to operate. There are a finite
number of valid network segments on Chameleon. If you are unable to create a
network because there are no valid network segments available, then you can
create a network automatically by <a class="reference internal" href="../reservations.html#reservation-cli-vlan"><span class="std std-ref">Creating a Lease to Reserve a VLAN Segment</span></a>.</p>
</div>
<p>Once you have created a Network, you may create a subnet with the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>subnet<span class="w"> </span>create<span class="w"> </span>--subnet-range<span class="w"> </span>&lt;cidr&gt;<span class="w"> </span>--dhcp<span class="w"> </span>--network<span class="w"> </span>&lt;network_name&gt;<span class="w"> </span>&lt;subnet_name&gt;
</pre></div>
</div>
<p>For example, the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>subnet<span class="w"> </span>create<span class="w"> </span>--subnet-range<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>--dhcp<span class="w"> </span>--network<span class="w"> </span>MyNetwork<span class="w"> </span>MySubnet
</pre></div>
</div>
<p>will create a subnet with the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>             <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">allocation_pools</span>  <span class="o">|</span> <span class="mf">192.168.1.2</span><span class="o">-</span><span class="mf">192.168.1.254</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">cidr</span>              <span class="o">|</span> <span class="mf">192.168.1.0</span><span class="o">/</span><span class="mi">24</span>                       <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>        <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">23</span><span class="n">T23</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">11</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>       <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">dns_nameservers</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">enable_dhcp</span>       <span class="o">|</span> <span class="kc">True</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">gateway_ip</span>        <span class="o">|</span> <span class="mf">192.168.1.1</span>                          <span class="o">|</span>
<span class="o">|</span> <span class="n">host_routes</span>       <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                <span class="o">|</span> <span class="mi">8</span><span class="n">be4e80d</span><span class="o">-</span><span class="n">ba49</span><span class="o">-</span><span class="mi">4</span><span class="n">cdc</span><span class="o">-</span><span class="mi">8480</span><span class="o">-</span><span class="n">ba43dd4724c2</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">ip_version</span>        <span class="o">|</span> <span class="mi">4</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_address_mode</span> <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_ra_mode</span>      <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>              <span class="o">|</span> <span class="n">MySubnet</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">network_id</span>        <span class="o">|</span> <span class="mi">21</span><span class="n">ed933c</span><span class="o">-</span><span class="mi">323</span><span class="n">d</span><span class="o">-</span><span class="mi">4708</span><span class="o">-</span><span class="mi">930</span><span class="n">c</span><span class="o">-</span><span class="n">d5f82c507430</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">project_id</span>        <span class="o">|</span> <span class="n">d5233415ee0b467baec14cbd2d0e1331</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">revision_number</span>   <span class="o">|</span> <span class="mi">2</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">segment_id</span>        <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">service_types</span>     <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">subnetpool_id</span>     <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">tags</span>              <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>        <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">23</span><span class="n">T23</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">11</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>To see more options when creating a subnet, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>subnet<span class="w"> </span>create<span class="w"> </span>--help
</pre></div>
</div>
</section>
<section id="id1">
<h3>Creating a Router<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>To create a router, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>router<span class="w"> </span>create<span class="w"> </span>&lt;router_name&gt;
</pre></div>
</div>
<p>Your output should look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>                   <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+-------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">admin_state_up</span>          <span class="o">|</span> <span class="n">UP</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zone_hints</span> <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zones</span>      <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>              <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">23</span><span class="n">T23</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">35</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>             <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">distributed</span>             <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">external_gateway_info</span>   <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">flavor_id</span>               <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">ha</span>                      <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                      <span class="o">|</span> <span class="mi">9</span><span class="n">b5d4516</span><span class="o">-</span><span class="mi">804</span><span class="n">a</span><span class="o">-</span><span class="mi">4</span><span class="n">c01</span><span class="o">-</span><span class="mi">9016</span><span class="o">-</span><span class="mi">3</span><span class="n">a27fc4197d1</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>                    <span class="o">|</span> <span class="n">MyRouter</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">project_id</span>              <span class="o">|</span> <span class="n">d5233415ee0b467baec14cbd2d0e1331</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">revision_number</span>         <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">routes</span>                  <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">status</span>                  <span class="o">|</span> <span class="n">ACTIVE</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">tags</span>                    <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>              <span class="o">|</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">23</span><span class="n">T23</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">35</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">+-------------------------+--------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="id2">
<h3>Adding a Router Interface<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<p>A Router Interface can be added and attached to a subnet with the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>router<span class="w"> </span>add<span class="w"> </span>subnet<span class="w"> </span>&lt;router_name&gt;<span class="w"> </span>&lt;subnet_name&gt;
</pre></div>
</div>
<p>In addition, you can specify an <em>External Gateway</em> for your router and connect it to the <code class="docutils literal notranslate"><span class="pre">public</span></code> Network with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>router<span class="w"> </span><span class="nb">set</span><span class="w"> </span>--external-gateway<span class="w"> </span>public<span class="w"> </span>&lt;router_name&gt;
</pre></div>
</div>
</section>
<section id="id3">
<h3>Deleting Networking Objects<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<p>To delete a router with an External Gateway and subnets associated to it, use the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openstack<span class="w"> </span>router<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>--external-gateway<span class="w"> </span>&lt;router_name&gt;
openstack<span class="w"> </span>router<span class="w"> </span>remove<span class="w"> </span>subnet<span class="w"> </span>&lt;router_name&gt;<span class="w"> </span>&lt;subnet_name&gt;
openstack<span class="w"> </span>router<span class="w"> </span>delete<span class="w"> </span>&lt;subnet&gt;
openstack<span class="w"> </span>network<span class="w"> </span>delete<span class="w"> </span>&lt;network_name&gt;
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ExPECA.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>